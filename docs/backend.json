{
  "entities": {
    "drug": {
      "title": "Drug",
      "description": "Represents a drug in the pharmacy inventory.",
      "type": "object",
      "properties": {
        "barcode": { "type": "string", "description": "The unique barcode of the drug." },
        "designation": { "type": "string", "description": "The name of the drug." },
        "currentStock": { "type": "number", "description": "The current quantity in stock." },
        "expiryDate": { "type": "string", "description": "The expiration date of the drug batch." },
        "lowStockThreshold": { "type": "number", "description": "The threshold for low stock warnings." }
      },
      "required": ["barcode", "designation", "currentStock"]
    },
    "service": {
      "title": "Service",
      "description": "Represents a hospital service/department.",
      "type": "object",
      "properties": {
        "name": { "type": "string", "description": "The name of the service." }
      },
      "required": ["name"]
    },
    "distribution": {
      "title": "Distribution",
      "description": "Represents a distribution of a drug to a service.",
      "type": "object",
      "properties": {
        "barcode": { "type": "string" },
        "itemName": { "type": "string" },
        "quantityDistributed": { "type": "number" },
        "serviceId": { "type": "string" },
        "service": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "userId": { "type": "string" },
        "lotNumber": {"type": "string"}
      },
      "required": ["barcode", "itemName", "quantityDistributed", "serviceId", "date", "userId"]
    },
    "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile.",
      "type": "object",
      "properties": {
        "email": { "type": "string", "format": "email" },
        "displayName": { "type": "string" },
        "photoURL": { "type": "string", "format": "uri" }
      }
    }
  },
  "auth": {
    "providers": ["google.com"]
  },
  "firestore": {
    "/drugs/{drugId}": {
      "schema": { "$ref": "#/entities/drug" },
      "description": "Collection of drugs in inventory. The document ID is the drug's barcode."
    },
    "/services/{serviceId}": {
      "schema": { "$ref": "#/entities/service" },
      "description": "Collection of hospital services."
    },
    "/distributions/{distributionId}": {
      "schema": { "$ref": "#/entities/distribution" },
      "description": "Log of all drug distributions."
    },
    "/users/{userId}": {
        "schema": { "$ref": "#/entities/userProfile" },
        "description": "User profile information."
    }
  }
}
